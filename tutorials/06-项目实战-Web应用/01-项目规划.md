# 模块 1: 项目规划

> 掌握从零开始规划完整 Web 应用的方法

## 学习目标

完成本模块后,你将能够:
- 分析和定义项目需求
- 选择合适的技术栈
- 将功能拆分为可管理的模块
- 制定现实可行的开发时间线

## 概述

成功的 Web 应用始于扎实的规划。在本模块中,我们将规划一个**任务管理应用 (Todo App Pro)**,包含用户认证、CRUD 操作和数据持久化功能。

## 1. 需求分析

### 定义项目目标

**你与 Claude 的对话**:
```
你:我想构建一个任务管理应用,帮我定义需求。

Claude:
让我们先了解你的需求。一个任务管理应用应该包含:

核心功能:
✅ 用户注册和登录
✅ 创建、编辑、删除任务
✅ 任务分类和标签
✅ 标记任务为完成/未完成
✅ 设置截止日期和优先级

附加功能:
✅ 搜索和过滤任务
✅ 按日期、优先级或状态排序
✅ 移动设备响应式设计
✅ 数据持久化(数据库)

你想在这个列表中添加特定功能吗?
```

### 用户故事

定义清晰的用户故事来指导开发:

```
作为用户,我希望:
- 注册账户以保存我的任务
- 登录以访问个人任务列表
- 创建包含标题、描述、截止日期和优先级的新任务
- 编辑现有任务以更新详细信息
- 删除不再需要的任务
- 标记任务为已完成
- 对任务进行分类(工作、个人、购物等)
- 搜索特定任务
- 按分类、优先级或状态过滤任务
- 从手机访问应用
```

## 2. 技术栈选择

### 选择合适的工具

**你与 Claude 的对话**:
```
你:帮我为这个项目选择技术栈。

Claude:
基于你的需求,我推荐:

前端:
- HTML5 + CSS3 + 原生 JavaScript
  或
- React(如果你想学习现代框架)

为什么?
- 易于学习和理解
- 无复杂构建流程(原生 JS)
- 完全控制代码

后端:
- Node.js + Express
- SQLite 数据库

为什么?
- 前后端都用 JavaScript
- Express 简单而强大
- SQLite 无需配置,非常适合学习

这个技术栈为你提供:
1. 平缓的学习曲线
2. 简单的部署
3. 完整的功能
4. 业界相关的技能

你更倾向哪种方案?
```

### 我们的技术栈决策

在本教程中,我们将使用:

**前端**:
- HTML5 用于结构
- CSS3 用于样式(响应式设计)
- 原生 JavaScript 用于功能

**后端**:
- Node.js 运行环境
- Express.js Web 框架
- SQLite 数据库用于数据持久化
- JWT 用于身份验证

**开发工具**:
- Git 版本控制
- VS Code 代码编辑器
- Postman 用于 API 测试

## 3. 功能拆分

### 模块化开发方法

**你与 Claude 的对话**:
```
你:将这个项目拆分为可管理的模块。

Claude:
这是结构化的拆分:

第一阶段:基础 (2-3 小时)
- [ ] 设置项目目录结构
- [ ] 初始化 Git 仓库
- [ ] 创建基本 HTML 结构
- [ ] 添加 CSS 样式框架

第二阶段:核心前端 (4-5 小时)
- [ ] 设计静态页面 (HTML/CSS)
- [ ] 实现任务 CRUD 操作
- [ ] 添加本地存储数据
- [ ] 创建 UI 交互

第三阶段:后端集成 (4-5 小时)
- [ ] 搭建 Express 服务器
- [ ] 设计 RESTful API 路由
- [ ] 集成 SQLite 数据库
- [ ] 创建数据模型

第四阶段:身份验证 (2-3 小时)
- [ ] 实现用户注册
- [ ] 添加登录功能
- [ ] 设置 JWT Token 管理
- [ ] 保护 API 路由

第五阶段:增强功能 (2-3 小时)
- [ ] 添加搜索和过滤功能
- [ ] 实现排序功能
- [ ] 优化性能
- [ ] 添加响应式设计

第六阶段:部署 (1-2 小时)
- [ ] 生产环境准备
- [ ] 部署到托管平台
- [ ] 配置环境变量
- [ ] 测试在线应用

总预计时间: 15-20 小时
```

## 4. 开发时间线

### 制定现实的时间表

```markdown
第 1 周:基础和前端
├── 第 1-2 天:项目设置和静态 UI
├── 第 3-4 天:前端功能
└── 第 5 天:测试和改进

第 2 周:后端和集成
├── 第 1-2 天:后端服务器和 API
├── 第 3-4 天:用户认证
└── 第 5 天:前后端集成

第 3 周:增强和部署
├── 第 1-2 天:附加功能
├── 第 3-4 天:测试和修复 Bug
└── 第 5 天:部署和文档
```

### 每日目标模板

```
第 [X] 天:[重点领域]
上午 (2-3 小时):
- [ ] 任务 1
- [ ] 任务 2

下午 (2-3 小时):
- [ ] 任务 3
- [ ] 任务 4

每日检查点:
- 什么进展顺利?
- 遇到什么挑战?
- 明天需要研究什么?
```

## 5. 项目架构

### 高层系统设计

```
┌─────────────────────────────────────────┐
│          客户端 (浏览器)                 │
│  ┌─────────────────────────────────┐   │
│  │  HTML + CSS + JavaScript        │   │
│  │  - UI 组件                      │   │
│  │  - 事件处理器                   │   │
│  │  - API 客户端                   │   │
│  └─────────────────────────────────┘   │
└──────────────┬──────────────────────────┘
               │ HTTP 请求
               │ (REST API)
┌──────────────▼──────────────────────────┐
│          服务器 (Node.js)               │
│  ┌─────────────────────────────────┐   │
│  │  Express.js                     │   │
│  │  - 路由处理器                   │   │
│  │  - 中间件 (认证, CORS)          │   │
│  │  - 业务逻辑                     │   │
│  └─────────────────────────────────┘   │
└──────────────┬──────────────────────────┘
               │ 数据库查询
┌──────────────▼──────────────────────────┐
│       数据库 (SQLite)                   │
│  ┌─────────────────────────────────┐   │
│  │  表:                            │   │
│  │  - users                        │   │
│  │  - tasks                        │   │
│  │  - categories                   │   │
│  └─────────────────────────────────┘   │
└─────────────────────────────────────────┘
```

### 数据流

```
1. 用户操作 (前端)
   ↓
2. JavaScript 事件处理器
   ↓
3. API 请求到后端
   ↓
4. Express 路由处理器
   ↓
5. 数据库操作
   ↓
6. 响应到前端
   ↓
7. 更新 UI
```

## 6. 文件结构规划

### 项目目录布局

```
todo-app-pro/
├── client/                    # 前端代码
│   ├── index.html            # 主页面
│   ├── login.html            # 登录页面
│   ├── register.html         # 注册页面
│   ├── css/
│   │   ├── style.css         # 主样式
│   │   ├── components.css    # 组件样式
│   │   └── responsive.css    # 移动端样式
│   ├── js/
│   │   ├── app.js           # 主应用逻辑
│   │   ├── task.js          # 任务类和方法
│   │   ├── ui.js            # UI 操作
│   │   ├── api.js           # API 客户端
│   │   ├── auth.js          # 认证逻辑
│   │   └── storage.js       # 本地存储工具
│   └── assets/
│       └── images/          # 图标和图片
├── server/                   # 后端代码
│   ├── index.js             # 服务器入口
│   ├── routes/
│   │   ├── tasks.js         # 任务路由
│   │   ├── users.js         # 用户路由
│   │   └── auth.js          # 认证路由
│   ├── models/
│   │   ├── task.js          # 任务模型
│   │   └── user.js          # 用户模型
│   ├── middleware/
│   │   ├── auth.js          # 认证中间件
│   │   └── errorHandler.js  # 错误处理
│   └── database.js          # 数据库设置
├── tests/                    # 测试文件
│   ├── task.test.js
│   └── api.test.js
├── .env                      # 环境变量
├── .gitignore               # Git 忽略规则
├── package.json             # 依赖
└── README.md                # 文档
```

## 7. API 设计

### RESTful 端点

**任务管理**:
```
GET    /api/tasks              获取所有任务
GET    /api/tasks/:id          获取单个任务
POST   /api/tasks              创建新任务
PUT    /api/tasks/:id          更新任务
DELETE /api/tasks/:id          删除任务
```

**用户管理**:
```
POST   /api/auth/register      注册新用户
POST   /api/auth/login         用户登录
GET    /api/auth/profile       获取用户资料
POST   /api/auth/logout        用户登出
```

**过滤和搜索**:
```
GET    /api/tasks?category=work        按分类过滤
GET    /api/tasks?priority=high        按优先级过滤
GET    /api/tasks?search=keyword       搜索任务
GET    /api/tasks?completed=true       按状态过滤
```

### 请求/响应示例

**创建任务请求**:
```json
POST /api/tasks
Content-Type: application/json
Authorization: Bearer <token>

{
  "title": "完成项目文档",
  "description": "为 API 端点编写综合文档",
  "dueDate": "2024-12-31",
  "priority": "high",
  "category": "work"
}
```

**创建任务响应**:
```json
{
  "success": true,
  "task": {
    "id": "1234",
    "title": "完成项目文档",
    "description": "为 API 端点编写综合文档",
    "dueDate": "2024-12-31",
    "priority": "high",
    "category": "work",
    "completed": false,
    "createdAt": "2024-01-15T10:30:00Z"
  }
}
```

## 8. 数据库模式

### 表和关系

**Users 表**:
```sql
CREATE TABLE users (
  id INTEGER PRIMARY KEY AUTOINCREMENT,
  username TEXT UNIQUE NOT NULL,
  email TEXT UNIQUE NOT NULL,
  password_hash TEXT NOT NULL,
  created_at DATETIME DEFAULT CURRENT_TIMESTAMP
);
```

**Tasks 表**:
```sql
CREATE TABLE tasks (
  id INTEGER PRIMARY KEY AUTOINCREMENT,
  user_id INTEGER NOT NULL,
  title TEXT NOT NULL,
  description TEXT,
  due_date TEXT,
  priority TEXT CHECK(priority IN ('low', 'medium', 'high')),
  category TEXT,
  completed BOOLEAN DEFAULT 0,
  created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
  updated_at DATETIME DEFAULT CURRENT_TIMESTAMP,
  FOREIGN KEY (user_id) REFERENCES users(id)
);
```

**Categories 表** (可选):
```sql
CREATE TABLE categories (
  id INTEGER PRIMARY KEY AUTOINCREMENT,
  user_id INTEGER NOT NULL,
  name TEXT NOT NULL,
  color TEXT,
  FOREIGN KEY (user_id) REFERENCES users(id)
);
```

## 关键要点

1. **从明确的需求开始** - 在编写代码之前定义要构建什么
2. **选择合适的工具** - 选择与你的技能水平和项目需求匹配的技术栈
3. **拆分项目** - 将工作划分为可管理的阶段
4. **规划架构** - 提前设计系统结构
5. **创建时间线** - 设定现实的目标和里程碑

## 实践练习

在进入下一个模块之前,完成这个规划练习:

**任务**: 为不同领域规划类似的 Web 应用
- 选择项目想法(例如:博客、费用追踪器、食谱管理器)
- 定义核心功能
- 选择技术栈
- 拆分为开发阶段
- 草绘文件结构

## 下一步

现在你有了扎实的计划,继续:

👉 **[模块 2: 项目结构搭建](./02-项目结构.md)** - 设置项目目录和开发环境

---

📚 **返回**: [第六课概述](./index.md)
