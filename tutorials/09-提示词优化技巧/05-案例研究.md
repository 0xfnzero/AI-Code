# 模块 5: 案例研究

> 学习真实项目案例

## 案例 1: 重构大型组件

### 问题描述
一个300行的UserDashboard组件,难以维护

### 优化后的提示词
```
你现在是一位资深React开发专家。

背景:
- 组件: UserDashboard.js (300行)
- 问题: 职责不清晰,难以测试
- 技术栈: React 18 + TypeScript

请帮我重构,要求:
1. 拆分为多个小组件 (每个<100行)
2. 职责单一
3. 保持原有功能
4. 添加PropTypes/TypeScript类型
5. 提供组件结构图

输出格式:
1. 组件拆分方案
2. 各组件代码
3. 集成测试
```

### 结果
- 拆分为5个组件
- 每个组件<80行
- 可测试性提升
- 维护成本降低60%

## 案例 2: 性能优化

### 问题描述
首页加载时间5秒,需要优化到<2秒

### 优化后的提示词
```
你现在是性能优化专家。

当前问题:
- 首页加载: 5秒
- 目标: <2秒
- 技术栈: React + Webpack 5

请按步骤分析:
1. 列出可能的性能瓶颈(至少5个)
2. 分析每个问题的影响程度
3. 提供优化方案(优先级排序)
4. 实现Top 3优化
5. 预估优化效果

输出格式:
## 瓶颈分析
[表格形式]

## 优化方案
[详细方案+代码]

## 预期效果
[数据对比]
```

### 结果
- 代码分割: 节省1.5秒
- 图片优化: 节省0.8秒  
- Bundle优化: 节省0.5秒
- 总优化: 从5秒→1.8秒

## 案例 3: Bug修复

### 问题描述
登录后偶尔丢失用户信息

### 优化后的提示词
```
帮我排查一个难以复现的bug:

## Bug描述
用户登录后,刷新页面偶尔丢失登录状态

## 复现步骤
1. 用户登录
2. 浏览几个页面
3. 刷新浏览器
4. 约30%概率丢失登录状态

## 技术实现
- 使用JWT存储在localStorage
- Token有效期7天
- 前端每次请求带token

## 相关代码
[贴上auth相关代码]

请帮我:
1. 列出所有可能原因
2. 逐个排查(提供检查方法)
3. 找出根本原因
4. 提供修复方案
5. 添加防御性代码
```

### 结果
找到问题: localStorage在某些浏览器隐私模式下不可用
解决方案: 添加fallback到sessionStorage

## 关键启示

1. **问题要具体** - 提供完整的问题描述
2. **流程要清晰** - 分步骤解决问题
3. **结果要验证** - 确保方案有效
4. **经验要总结** - 记录成功案例

👉 下一个: [模块 6: 练习项目](./06-练习项目.md)
